{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nexport const checkout = createAsyncThunk('cart/checkout', async (_, {\n  getState,\n  rejectWithValue\n}) => {\n  const {\n    name,\n    city,\n    state,\n    pincode,\n    address_line_1,\n    address_line_2,\n    area,\n    total_price\n  } = getState().cart;\n\n  try {\n    const response = await axios.post('http://localhost:5000/cart/addtocart', {\n      data: {\n        'delivery_address': address_line_1 + '\\n' + address_line_2 + '\\n' + area + '\\n' + city + '-' + pincode + '\\n' + state,\n        'total_price': total_price,\n        'name': name\n      }\n    }, {\n      withCredentials: true\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response);\n  }\n});\nexport const cartAdd = createAsyncThunk('cart/Add', async (id, {\n  getState,\n  rejectWithValue\n}) => {\n  const {\n    lens_details\n  } = getState().cart;\n\n  try {\n    await axios({\n      method: 'POST',\n      url: 'http://localhost:5000/cart/addtocart',\n      withCredentials: true,\n      data: {\n        'id': id,\n        'lens_details': lens_details\n      }\n    }).then(response => {\n      return response.data;\n    });\n  } catch (error) {\n    return rejectWithValue(error.response);\n  }\n});\nexport const cartDelete = createAsyncThunk('cart/delete', async id => {\n  const response = await axios.delete('http://localhost:5000/cart/delete', {\n    withCredentials: true,\n    data: {\n      'pid': id\n    }\n  });\n  return response.data;\n});\nexport const cartGet = createAsyncThunk('cart/getCart', async () => {\n  const response = await axios.get('http://localhost:5000/cart/getcart', {\n    withCredentials: true\n  });\n  return response.data;\n});\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    cart: [],\n    lens_details: {\n      rsign: '0',\n      lsign: '0',\n      resph: 0,\n      reax: 0,\n      recyl: 0,\n      readd: 0,\n      lesph: 0,\n      leax: 0,\n      lecyl: 0,\n      leadd: 0\n    },\n    total_price: 0,\n    delivery_address: '',\n    name: '',\n    city: '',\n    state: '',\n    pincode: '',\n    address_line_1: '',\n    address_line_2: '',\n    area: '',\n    inserted: false,\n    fetched: false,\n    cartAddError: false,\n    checkoutError: false,\n    errormessage: ''\n  },\n  reducers: {\n    setValue: (state, action) => {\n      state[action.payload.name] = action.payload.value;\n    }\n  },\n  extraReducers: {\n    [cartDelete.fulfilled]: (state, action) => {\n      state.cart = action.payload;\n    },\n    [cartGet.fulfilled]: (state, action) => {\n      state.cart = action.payload['cart'];\n      state.total_price = action.payload['total_price'];\n      state.fetched = true;\n    },\n    [cartGet.rejected]: (state, action) => {\n      state.cart = [];\n      state.error = true;\n    },\n    [cartAdd.rejected]: (state, action) => {\n      state.cartAddError = true;\n\n      if (action.error.message === '403') {\n        state.errormessage = 'First Login then you can add products';\n      }\n    },\n    [checkout.fulfilled]: (state, action) => {\n      state.cart = [];\n    },\n    [checkout.rejected]: (state, action) => {\n      state.checkoutError = 500;\n    }\n  }\n});\nexport const {\n  setValue\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"sources":["C:/Users/Geeta/opticonnect/frontend/src/slices/cart/cartSlice.js"],"names":["createAsyncThunk","createSlice","axios","checkout","_","getState","rejectWithValue","name","city","state","pincode","address_line_1","address_line_2","area","total_price","cart","response","post","data","withCredentials","error","cartAdd","id","lens_details","method","url","then","cartDelete","delete","cartGet","get","cartSlice","initialState","rsign","lsign","resph","reax","recyl","readd","lesph","leax","lecyl","leadd","delivery_address","inserted","fetched","cartAddError","checkoutError","errormessage","reducers","setValue","action","payload","value","extraReducers","fulfilled","rejected","message","actions","reducer"],"mappings":"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","sourcesContent":["import {createAsyncThunk, createSlice} from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\nexport const checkout = createAsyncThunk(\r\n    'cart/checkout',\r\n    async (_, { getState , rejectWithValue})=>{\r\n        const {name,city,state,pincode,address_line_1,address_line_2,area,total_price} = getState().cart;\r\n        try{\r\n            const response = await axios.post('http://localhost:5000/cart/addtocart',\r\n            {data:{\r\n                'delivery_address':address_line_1+'\\n'+address_line_2+'\\n'+area+'\\n'+city+'-'+pincode+'\\n'+state,\r\n\t\t\t\t'total_price':total_price,\r\n\t\t\t\t'name':name\r\n            }},\r\n            {withCredentials:true});\r\n            return response.data;\r\n        }catch(error){\r\n            return rejectWithValue(error.response);\r\n        }\r\n    }\r\n)\r\nexport const cartAdd = createAsyncThunk(\r\n    'cart/Add',\r\n    async (id,{ getState , rejectWithValue })=>{\r\n        const {lens_details} = getState().cart;\r\n        try{\r\n            await axios({\r\n                method:'POST',\r\n                url:'http://localhost:5000/cart/addtocart',\r\n                withCredentials:true,\r\n                data:{\r\n                    'id':id,\r\n                    'lens_details':lens_details\r\n                }\r\n                }).then((response)=>{\r\n                return response.data;\r\n            });\r\n        }catch(error){\r\n            return rejectWithValue(error.response);\r\n        }\r\n    }\r\n)\r\nexport const cartDelete = createAsyncThunk(\r\n    'cart/delete',\r\n    async (id)=>{\r\n        const response = await axios.delete('http://localhost:5000/cart/delete',{withCredentials:true,data:{'pid':id}});\r\n        return response.data;\r\n    }\r\n)\r\nexport const cartGet = createAsyncThunk(\r\n    'cart/getCart',\r\n    async ()=>{\r\n        const response = await axios.get('http://localhost:5000/cart/getcart',{withCredentials:true});\r\n        return response.data;\r\n    }\r\n)\r\nconst cartSlice = createSlice({\r\n    name:'cart',\r\n    initialState:{\r\n        cart:[],\r\n        lens_details:{\r\n            rsign:'0',\r\n\t\t\tlsign:'0',\r\n\t\t\tresph:0,\r\n\t\t\treax:0,\r\n\t\t\trecyl:0,\r\n\t\t\treadd:0,\r\n\t\t\tlesph:0,\r\n\t\t\tleax:0,\r\n\t\t\tlecyl:0,\r\n\t\t\tleadd:0,\r\n        },\r\n        total_price:0,\r\n        delivery_address:'',\r\n\t\tname:'',\r\n\t\tcity:'',\r\n\t\tstate:'',\r\n\t\tpincode:'',\r\n\t\taddress_line_1:'',\r\n\t\taddress_line_2:'',\r\n\t\tarea:'',\r\n        inserted:false,\r\n        fetched:false,\r\n        cartAddError:false,\r\n        checkoutError:false,\r\n\r\n        errormessage:''\r\n    },\r\n    reducers:{\r\n        setValue:(state, action)=>{\r\n            state[action.payload.name]=action.payload.value;\r\n        }\r\n    },\r\n    extraReducers:{\r\n        [cartDelete.fulfilled]:(state,action)=>{\r\n            state.cart=action.payload;\r\n        },[cartGet.fulfilled]:(state, action)=>{\r\n            state.cart=action.payload['cart'];\r\n            state.total_price=action.payload['total_price'];\r\n            state.fetched=true\r\n        },[cartGet.rejected]:(state, action)=>{\r\n            state.cart=[];\r\n            state.error=true;\r\n        },[cartAdd.rejected]: (state, action)=>{\r\n            state.cartAddError=true;\r\n            if(action.error.message === '403'){\r\n                state.errormessage = 'First Login then you can add products';\r\n            }\r\n        },[checkout.fulfilled]:(state, action)=>{\r\n            state.cart=[];\r\n        },[checkout.rejected]:(state, action)=>{\r\n            state.checkoutError=500;\r\n        },\r\n    }\r\n\r\n})\r\nexport const {setValue} = cartSlice.actions;\r\nexport default cartSlice.reducer;"]},"metadata":{},"sourceType":"module"}